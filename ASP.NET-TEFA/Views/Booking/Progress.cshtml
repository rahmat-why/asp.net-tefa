@model IEnumerable<ASP.NET_TEFA.Models.TrsBooking>

@{
    ViewData["Title"] = "Servis Berjalan";
    Layout = "_LayoutUser";

    // Mengurutkan model berdasarkan nilai Progress dari yang tertinggi ke terendah
    var sortedModel = Model.OrderByDescending(x => x.Progress).ToList();
}

<div class="row justify-content-between">
    <div class="col-10">
        <b>Progres</b>
    </div>
    <div class="col-2">
        <b>Estimasi Selesai</b>
    </div>
</div>

@foreach (var item in sortedModel)
{
    <div class="row justify-content-between" id="@item.IdBooking">
        <div class="col-10 mt-2 position-relative">
            <div class="progress">
                @if (item.IdVehicleNavigation.Classify == "MOTOR")
                {
                    <i class="ti ti-motorbike position-absolute text-black" style="left: calc(@item.Progress% - 30px); top: -10px; font-size: 30px;"></i>
                }
                else
                {
                    <i class="ti ti-car position-absolute text-black" style="left: calc(@item.Progress% - 30px); top: -10px; font-size: 30px;"></i>
                }
                <div class="progress-bar progress-bar-striped" role="progressbar" style="width: @item.Progress%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">@item.Progress%</div>
            </div>
        </div>
        <div class="col-2 mt-2">
            @{
                var name = item?.IdVehicleNavigation?.IdCustomerNavigation?.Name;
            }
            <div style="font-weight: bold;">
                @name
            </div>
            <div>
                @item.FinishEstimationTime?.ToString("HH:mm - d MMMM yyyy")
            </div>
        </div>
    </div>
}
