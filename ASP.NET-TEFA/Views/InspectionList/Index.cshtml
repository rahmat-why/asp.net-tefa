@model IEnumerable<ASP.NET_TEFA.Models.TrsInspectionList>
@{
    ViewData["Title"] = "Inspection List";
    Layout = "_LayoutUser";
}

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger" role="alert">
        @TempData["ErrorMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<form asp-action="Create">
    <table class="table">
        <thead>
            <tr>
                <th>
                    Kelengkapan
                </th>
                <th>
                    Masuk
                </th>
                <th>
                    Keluar
                </th>
                <th>
                    Keterangan
                </th>
            </tr>
        </thead>
        <tbody>
            <input type="text" name="IdBooking" value="@ViewBag.IdBooking" hidden />
            @foreach (var item in Model) {
                <tr>
                    <td>
                        <input type="text" name="IdEquipment_@item.IdEquipment" value="@item.IdEquipment" class="form-control" hidden />
                        @Html.DisplayFor(modelItem => item.IdEquipmentNavigation.Name)
                    </td>
                    <td>
                        @if (item.Checklist == 1)
                        {
                            <input type="radio" name="Checklist_@item.IdEquipment" value="1" checked />
                        }
                        else
                        {
                            <input type="radio" name="Checklist_@item.IdEquipment" value="1" />
                        }
                    </td>
                    <td>
                        @if (item.Checklist == 0)
                        {
                            <input type="radio" name="Checklist_@item.IdEquipment" value="0" checked />
                        }
                        else
                        {
                            <input type="radio" name="Checklist_@item.IdEquipment" value="0" />
                        }
                    </td>
                    <td>
                        <input type="text" name="Description_@item.IdEquipment" value="@Html.DisplayFor(modelItem => item.Description)" class="form-control" />
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <p>Servis ini akan dimulai pada <b><span id="clock"></span></b>. Apakah anda yakin?</p>
    <button type="submit" class="btn btn-primary">Simpan</button>
</form>

<script>
    function updateClock() {
        var now = new Date();
        var hours = now.getHours();
        var minutes = now.getMinutes();
        var seconds = now.getSeconds();
        var formattedDate = now.toLocaleDateString(); // Get current date in the format "MM/DD/YYYY"
        var formattedTime = (hours < 10 ? "0" : "") + hours + ":" + (minutes < 10 ? "0" : "") + minutes + " - " + formattedDate;

        document.getElementById("clock").textContent = formattedTime;
    }

    setInterval(updateClock, 1000); // Update setiap 1 detik
</script>